This is the code used in the demo
